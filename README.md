# Plugin Explorer


Repo for exploring how to make Package Plugins.
            
## Handy Commands

```bash
swift package plugin --list
swift package $PLUGIN_VERB
swift package --allow-writing-to-package-directory $PLUGIN_VERB
```

for creating tools and plugin packages
```bash
swift package init --type tool #Comes with argument parser
swift package init --type build-tool-plugin
swift package init --type command-plugin
```

## Handy Rules of Thumb

- run on demand: command plugin
- run only if resources are missing or stale: build plugin
- run every build, before the build: pre-build plugin


## Gotchas

- Code generated by build plugins is generally detectable by IDE's, but the build tool has to have been run at least once before you can use it.
- Code only associated with a `.plugin` target doesn't get swept up in targets, and build problems can only be found in the build logs. Code also in its own stand alone tool does get more regular treatment. Prioritize putting as much as possible into a tool and as little a possible only in a plugin. 
- Write the tool and get it completely working, then write the plugin.
- stdout for a tool does not always work as expected. 
            
## References
- WWDC 2022 [Meet Swift Package plugins](https://developer.apple.com/videos/play/wwdc2022/110359)
- WWDC 2022 [Create Swift Package plugins](https://developer.apple.com/videos/play/wwdc2022/110401/)
- https://github.com/apple/swift-package-manager/
- https://forums.swift.org/t/pitch-package-manager-command-plugins/53172
- https://github.com/apple/swift-evolution/blob/main/proposals/0332-swiftpm-command-plugins.md
                                        
                                           
